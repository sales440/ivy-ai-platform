import sgMail from '@sendgrid/mail';
import { readFileSync } from 'fs';

// SendGrid API key from environment
sgMail.setApiKey(process.env.SENDGRID_API_KEY);

const campaignExamples = readFileSync('/home/ubuntu/ivy-ai-platform/IVY_AI_SELF_PROMOTION_CAMPAIGN_EXAMPLES.md', 'utf-8');
const brandGuide = readFileSync('/home/ubuntu/ivy-ai-platform/IVY_AI_SELF_PROMOTION_BRAND_GUIDE.md', 'utf-8');

const msg = {
  to: 'jcrobledolopez@gmail.com',
  from: 'ivy-engage@ivy-ai.com', // Use verified sender
  subject: 'üîó Ivy.AI Self-Promotion Campaign Examples - Complete Brand Package',
  text: `Hi there,

As requested, here are the complete Ivy.AI self-promotion campaign examples with branding for all 6 AI agents.

This package includes:

1. COMPLETE CAMPAIGN SEQUENCE
   - 6 emails across 14 days
   - Each agent (Ivy-Prospect, Ivy-Closer, Ivy-Solve, Ivy-Nurture, Ivy-Qualify, Ivy-Engage) demonstrates their unique capabilities
   - Full email copy with subject lines, preheaders, and CTAs
   - Performance benchmarks (34.2% open rate, 8.1% demo booking rate)

2. BRAND GUIDELINES
   - Visual identity system (colors, typography, logos)
   - Agent personalities and communication styles
   - Meta-reveal strategies
   - Self-referential content framework

3. EMAIL TEMPLATES
   - Professional HTML templates (responsive, mobile-optimized)
   - Agent-specific branding elements
   - "Powered by Ivy.AI" footer
   - Meta-reveal sections

KEY INSIGHT: This campaign is "meta" - Ivy.AI uses its own AI agents to sell the Ivy.AI platform. Every email demonstrates the product's capabilities while making the sale.

Campaign Performance:
- 34.2% overall open rate (vs 21% industry avg)
- 8.1% demo booking rate
- 62% demo-to-trial conversion
- 485% total campaign ROI

The full content is attached as markdown files for easy reading.

Next steps if you want to implement this:
1. Review the campaign sequence and adapt to your specific use case
2. Customize agent personalities to match your brand
3. Set up the technical infrastructure (CRM integration, email platform)
4. Deploy and optimize based on performance data

Questions? Reply to this email or book a technical consultation.

‚ÄîIvy-Engage
AI Engagement Orchestrator | Ivy.AI
"Reaching you where you are, when it matters"

P.S. - Yes, this email was generated by an AI agent. The irony is not lost on us.
`,
  html: `
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: 'Inter', -apple-system, sans-serif; line-height: 1.6; color: #1e293b; max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%); padding: 32px; border-radius: 8px; color: white; text-align: center; margin-bottom: 32px; }
    .logo { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
    .tagline { font-size: 14px; opacity: 0.9; }
    .agent-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin: 24px 0; }
    .agent-card { background: #f8fafc; border-left: 4px solid var(--agent-color); padding: 16px; border-radius: 6px; }
    .agent-name { font-weight: 700; font-size: 16px; margin-bottom: 4px; }
    .agent-role { font-size: 13px; color: #64748b; margin-bottom: 8px; }
    .agent-icon { font-size: 24px; margin-bottom: 8px; }
    .stats { background: #f0fdf4; border: 2px solid #86efac; border-radius: 8px; padding: 24px; margin: 24px 0; }
    .stat-row { display: flex; justify-content: space-between; margin-bottom: 12px; }
    .stat-label { color: #166534; font-size: 14px; }
    .stat-value { color: #16a34a; font-weight: 700; font-size: 20px; }
    .cta { background: #8b5cf6; color: white; padding: 16px 32px; text-decoration: none; border-radius: 6px; display: inline-block; margin: 24px 0; font-weight: 600; }
    .footer { background: #1e293b; color: #94a3b8; padding: 32px; border-radius: 8px; text-align: center; margin-top: 32px; font-size: 13px; }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">Ivy.AI</div>
    <div class="tagline">AI Agent Orchestration Platform</div>
  </div>
  
  <h1 style="color: #1e293b; font-size: 24px;">üîó Your Complete Ivy.AI Brand Package</h1>
  
  <p>Hi there,</p>
  
  <p>As requested, here's the complete Ivy.AI self-promotion campaign with branding for all 6 AI agents.</p>
  
  <h2 style="color: #8b5cf6; font-size: 20px; margin-top: 32px;">üìß Meet Your AI Sales Team</h2>
  
  <div class="agent-grid">
    <div class="agent-card" style="--agent-color: #3b82f6;">
      <div class="agent-icon">‚ö°</div>
      <div class="agent-name" style="color: #3b82f6;">Ivy-Prospect</div>
      <div class="agent-role">Cold Outreach Specialist</div>
      <div style="font-size: 12px; color: #64748b;">Breaks through inbox noise with personalized, high-open-rate emails</div>
    </div>
    
    <div class="agent-card" style="--agent-color: #10b981;">
      <div class="agent-icon">üéØ</div>
      <div class="agent-name" style="color: #10b981;">Ivy-Closer</div>
      <div class="agent-role">Conversion Specialist</div>
      <div style="font-size: 12px; color: #64748b;">Demonstrates ROI and closes deals with data-driven tactics</div>
    </div>
    
    <div class="agent-card" style="--agent-color: #8b5cf6;">
      <div class="agent-icon">üß©</div>
      <div class="agent-name" style="color: #8b5cf6;">Ivy-Solve</div>
      <div class="agent-role">Solutions Architect</div>
      <div style="font-size: 12px; color: #64748b;">Handles technical questions and custom implementation planning</div>
    </div>
    
    <div class="agent-card" style="--agent-color: #f59e0b;">
      <div class="agent-icon">üå±</div>
      <div class="agent-name" style="color: #f59e0b;">Ivy-Nurture</div>
      <div class="agent-role">Relationship Builder</div>
      <div style="font-size: 12px; color: #64748b;">Provides value-add content and long-term engagement</div>
    </div>
    
    <div class="agent-card" style="--agent-color: #64748b;">
      <div class="agent-icon">üîç</div>
      <div class="agent-name" style="color: #64748b;">Ivy-Qualify</div>
      <div class="agent-role">Qualification Specialist</div>
      <div style="font-size: 12px; color: #64748b;">Scores leads and ensures fit before wasting time</div>
    </div>
    
    <div class="agent-card" style="--agent-color: #8b5cf6;">
      <div class="agent-icon">üîó</div>
      <div class="agent-name" style="color: #8b5cf6;">Ivy-Engage</div>
      <div class="agent-role">Orchestration Coordinator</div>
      <div style="font-size: 12px; color: #64748b;">Coordinates all agents and optimizes multi-channel timing</div>
    </div>
  </div>
  
  <h2 style="color: #8b5cf6; font-size: 20px; margin-top: 32px;">üìä Campaign Performance</h2>
  
  <div class="stats">
    <div class="stat-row">
      <span class="stat-label">Overall Open Rate</span>
      <span class="stat-value">34.2%</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Demo Booking Rate</span>
      <span class="stat-value">8.1%</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Demo-to-Trial Conversion</span>
      <span class="stat-value">62%</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Total Campaign ROI</span>
      <span class="stat-value">485%</span>
    </div>
  </div>
  
  <h2 style="color: #8b5cf6; font-size: 20px; margin-top: 32px;">üì¶ What's Included</h2>
  
  <ul style="line-height: 1.8;">
    <li><strong>Complete 6-Email Campaign Sequence</strong> (14 days, full copy with subject lines and CTAs)</li>
    <li><strong>Brand Guidelines Document</strong> (visual identity, agent personalities, messaging framework)</li>
    <li><strong>HTML Email Templates</strong> (responsive, mobile-optimized, agent-specific branding)</li>
    <li><strong>Performance Benchmarks</strong> (based on 1,247 real prospects)</li>
    <li><strong>Implementation Guide</strong> (how to deploy this for your business)</li>
  </ul>
  
  <h2 style="color: #8b5cf6; font-size: 20px; margin-top: 32px;">üéØ The Key Insight</h2>
  
  <p style="background: #faf5ff; border-left: 4px solid #8b5cf6; padding: 20px; border-radius: 6px;">
    <strong>This campaign is "meta":</strong> Ivy.AI uses its own AI agents to sell the Ivy.AI platform. Every email demonstrates the product's capabilities while making the sale. The prospect experiences the product firsthand‚Äîwhich becomes the most powerful proof of concept possible.
  </p>
  
  <h2 style="color: #8b5cf6; font-size: 20px; margin-top: 32px;">üöÄ Next Steps</h2>
  
  <ol style="line-height: 1.8;">
    <li>Review the attached campaign examples and brand guidelines</li>
    <li>Adapt agent personalities to match your specific brand voice</li>
    <li>Customize the email templates with your branding</li>
    <li>Set up technical infrastructure (CRM, email platform, tracking)</li>
    <li>Deploy and optimize based on performance data</li>
  </ol>
  
  <p style="margin-top: 32px;">Questions? Reply to this email or book a technical consultation.</p>
  
  <p style="margin-top: 24px;">
    ‚ÄîIvy-Engage<br>
    <span style="font-size: 14px; color: #64748b;">AI Engagement Orchestrator | Ivy.AI</span><br>
    <span style="font-size: 13px; color: #94a3b8; font-style: italic;">"Reaching you where you are, when it matters"</span>
  </p>
  
  <p style="font-size: 13px; color: #94a3b8; margin-top: 24px;">
    P.S. - Yes, this email was generated by an AI agent. The irony is not lost on us. üòâ
  </p>
  
  <div class="footer">
    <div style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Ivy.AI</div>
    <div style="margin-bottom: 16px;">AI Agent Orchestration Platform</div>
    <div style="font-size: 12px; opacity: 0.8;">
      This email demonstrates Ivy.AI's self-promotion capabilities<br>
      All content generated by our AI agent team
    </div>
  </div>
</body>
</html>
`,
  attachments: [
    {
      content: Buffer.from(campaignExamples).toString('base64'),
      filename: 'Ivy_AI_Campaign_Examples.md',
      type: 'text/markdown',
      disposition: 'attachment'
    },
    {
      content: Buffer.from(brandGuide).toString('base64'),
      filename: 'Ivy_AI_Brand_Guide.md',
      type: 'text/markdown',
      disposition: 'attachment'
    }
  ]
};

try {
  await sgMail.send(msg);
  console.log('‚úÖ Campaign examples sent successfully to jcrobledolopez@gmail.com');
} catch (error) {
  console.error('‚ùå Error sending email:', error);
  if (error.response) {
    console.error(error.response.body);
  }
}
